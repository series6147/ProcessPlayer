{
	Children: [
	{
		Blank: {
		ID: "start",
		OnExecuteStarted: "//initialization
globals['operator']='';
globals['result']=null;
		OutgoingIDs: ["console.selector"]
		}
	},
	{
		Decision: {
		ID: "console.selector",
		Condition: "if (this.IsConsole)
{
	Console.WriteLine('enter number or operator.');
	var text = Console.ReadLine();
	if (isNumeric(text))
	{
		this.setInput({ 'console.selector': [value(text)] });
		return ['number'];
	}
	else
	{
		switch (text)
		{
		case '':
		case '/':
		case '*':
		case '-':
		case '+':
		{
			this.setInput({ 'console.selector': [text] });
			return ['operator'];
		}
			break;
		case 'c':
		case 'C':
			return ['reset'];
			break;
		}
	}
	return ['console.selector'];
}",
		OutgoingIDs: ["console.selector","end","number","operator","reset"],
		TriggerMode: 1
		}
	},
	{
		Decision: {
		Condition: "var values = this.getInput()['console.selector'];
if (values != null && values.Length)
{
	globals['number']=values[0].Data;

	this.msg((globals['result'] == null ? toString(globals['number']) : toString(globals['result'])) + ' ' + globals['operator']);
	
	if (globals['operator'] != '')
	{
		return ['calculator'];
	}
	else
	{
		return ['console.selector'];
	}
}",
		ID: "number",
		OutgoingIDs: ["calculator","console.selector"]
		}
	},
	{
		Decision: {
		Condition: "var values = this.getInput()['console.selector'];
if (values != null && values.Length)
{
	globals['operator']=values[0].Data;

	// debug log
	this.msg('op1 = ' + globals['operator1']);
	this.msg('op2 = ' + globals['operator2']);
	this.msg('result = ' + toString(globals['result']));
	
	this.msg(toString(globals['number2']) + ' ' + globals['operator1']);
	if (globals['number2'] != null && globals['operator2'] != '')
	{
		return ['calculator'];
	}
	else
	{
		return ['console.selector'];
	}
}",
		ID: "operator",
		OutgoingIDs: ["calculator","console.selector"]
		}
	},
	{
		Blank: {
		ID: "calculator",
		OnExecuteStarted: "// debug log
this.msg('op1 = ' + globals['operator1']);
this.msg('op2 = ' + globals['operator2']);
this.msg('result = ' + toString(globals['result']));

switch (globals['operator2'])
{
	case '/':
	{
		globals['result']=globals['result']/globals['number1'];
	}
		break;
	case '*':
	{
		globals['result']=globals['result']*globals['number1'];
	}
		break;
	case '-':
	{
		globals['result']=globals['result']-globals['number1'];
	}
		break;
	case '+':
	{
		globals['result']=globals['result']+globals['number1'];
	}
		break;
}
this.msg('= ' + toString(globals['result']));
",
		OutgoingIDs: ["console.selector"]
		}
	},
	{
		Blank: {
		ID: "reset",
		OnExecuteStarted: "//reset
globals['operator']='';
globals['result']=null;
		OutgoingIDs: ["console.selector"]
		}
	},
	{
		Blank: {
		ID: "end"
		}
	}
	]
}